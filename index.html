<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>PinMeUP! - Wersja z Auto-Plikiem</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* STYLE BEZ ZMIAN */
:root {
--primary: #4834d4; --primary-dark: #301b9e; --salmon: #ff7979; --accent: #f9ca24; 
--bg-color: #f7f1ff; --glass: rgba(255, 255, 255, 0.98); --shadow: 0 10px 40px -10px rgba(72, 52, 212, 0.15);
--radius: 16px; --banner-1-height: 60px; --banner-2-height: 45px; --header-height: 70px; --top-gap: 0px;
}
html { scroll-behavior: smooth; }
body { 
font-family: 'Montserrat', sans-serif; background-color: var(--bg-color); 
background-image: radial-gradient(#e0d4fc 1px, transparent 1px); background-size: 20px 20px;
color: #2d3436; margin: 0; padding-bottom: 150px;
padding-top: calc(var(--top-gap) + var(--banner-1-height) + var(--banner-2-height) + var(--header-height) + 20px); 
-webkit-tap-highlight-color: transparent;
}

#toast {
visibility: hidden; min-width: 200px; background-color: #2d3436; color: #fff; text-align: center;
border-radius: 50px; padding: 12px 25px; position: fixed; z-index: 10000; left: 50%; bottom: 20px; 
transform: translateX(-50%); font-size: 0.9rem; font-weight: 600; box-shadow: 0 5px 20px rgba(0,0,0,0.4);
opacity: 0; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55); white-space: nowrap; 
}
#toast.show { visibility: visible; opacity: 1; bottom: 100px; }

.event-banner {
position: fixed; top: var(--top-gap); left: 0; width: 100%; height: var(--banner-1-height); 
background: linear-gradient(90deg, #ff0055, #ff7979, #f9ca24); background-size: 200% 200%; color: white;
display: flex; justify-content: center; align-items: center; font-size: 0.85rem; font-weight: 800; text-transform: uppercase; 
letter-spacing: 0.5px; z-index: 1003; animation: gradientMove 5s ease infinite; text-align: center; padding: 0 10px; box-sizing: border-box;
}
@keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.event-highlight { background: rgba(0,0,0,0.2); padding: 2px 6px; border-radius: 4px; margin: 0 3px; display: inline-block; }

.promo-banner {
position: fixed; top: calc(var(--top-gap) + var(--banner-1-height)); left: 0; width: 100%; height: var(--banner-2-height);
background: #fff200; color: #d63031; display: flex; align-items: center; overflow: hidden; border-bottom: 3px solid #d63031;
z-index: 1002; white-space: nowrap;
}
.marquee { display: inline-block; padding-left: 100%; animation: marquee 25s linear infinite; font-weight: 900; font-size: 1rem; text-transform: uppercase; }
@keyframes marquee { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }

header { 
background: var(--glass); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
position: fixed; top: calc(var(--top-gap) + var(--banner-1-height) + var(--banner-2-height)); left: 0; width: 100%; 
height: var(--header-height); z-index: 1001; border-bottom: 1px solid rgba(255,255,255,0.3); 
box-shadow: 0 4px 20px rgba(0,0,0,0.03); display: flex; align-items: center; transition: all 0.3s;
}
@media (max-width: 900px) {
:root { --top-gap: 0px; } header { height: auto; padding: 10px 0; flex-wrap: wrap; }
.marquee { animation: marquee 30s linear infinite; font-size: 0.85rem; } 
.event-banner { font-size: 0.7rem; line-height: 1.1; } .mobile-break { display: inline !important; }
}

.nav-inner { max-width: 1200px; width: 100%; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
.logo { font-weight: 900; font-size: 1.4rem; color: var(--primary); display: flex; align-items: center; gap: 10px; cursor: pointer; text-decoration: none; }
.logo img { height: 40px; border-radius: 50%; border: 2px solid var(--primary); }

.main-menu { display: flex; gap: 8px; }
.menu-link { text-decoration: none; color: #555; font-weight: 700; font-size: 0.75rem; padding: 8px 12px; border-radius: 20px; transition: 0.2s; text-transform: uppercase; cursor: pointer; }
.menu-link:hover { background: var(--primary); color: white; transform: translateY(-2px); }
.menu-link.highlight { color: var(--salmon); border: 1px solid var(--salmon); }
.menu-link.gold { color: #b7950b; border: 1px solid #f1c40f; }

.cart-btn-desktop { background: var(--primary); color: white; padding: 8px 20px; border-radius: 50px; font-weight: 700; text-decoration: none; display: flex; align-items: center; gap: 8px; transition: 0.3s; font-size: 0.9rem; flex-shrink: 0; }
.mobile-menu-toggle { display: none; background: none; border: none; font-size: 1.2rem; color: var(--primary); font-weight: 900; cursor: pointer; }

@media (max-width: 900px) {
.nav-inner { flex-wrap: wrap; } .logo { flex: 1; justify-content: flex-start; } .cart-btn-desktop { display: none; }
.mobile-menu-toggle { display: block; } 
.main-menu { display: none; flex-direction: column; width: 100%; background: white; margin-top: 10px; border-top: 1px solid #eee; padding: 10px 0; animation: fadeInMenu 0.3s ease; max-height: 60vh; overflow-y: auto; }
.main-menu.open { display: flex; } .menu-link { display: block; width: 100%; text-align: left; padding: 12px 10px; border-bottom: 1px solid #f9f9f9; border-radius: 0; }
.menu-link:active { background: #f0f0f0; }
}
@keyframes fadeInMenu { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

.main-wrapper { 
max-width: 1200px; margin: 20px auto; padding: 0 20px; display: grid; 
grid-template-columns: 2fr 1.1fr; grid-template-areas: "products cart" "gallery cart"; gap: 40px; align-items: start; 
}
.content-col { grid-area: products; } .sidebar { grid-area: cart; } .extra-content-box { grid-area: gallery; }
@media (max-width: 900px) {
.main-wrapper { grid-template-columns: 1fr; grid-template-areas: "products" "cart" "gallery"; padding: 0 15px; gap: 20px; margin-top: 10px; }
.grid { grid-template-columns: repeat(2, 1fr) !important; gap: 12px !important; }
}

.accordion-item { background: white; border-radius: var(--radius); margin-bottom: 15px; box-shadow: var(--shadow); overflow: hidden; scroll-margin-top: 240px; border-left: 5px solid #ccc; transition: transform 0.2s; }
.accordion-item.rainbow-border { border-left: none !important; background-image: linear-gradient(to bottom, #ffadad, #ffd6a5, #fdffb6, #caffbf, #9bf6ff, #a0c4ff, #bdb2ff, #ffc6ff); background-size: 6px 100%; background-repeat: no-repeat; }
.accordion-item.rainbow-border .accordion-header, .accordion-item.rainbow-border .accordion-content { margin-left: 6px; background: white; }
.accordion-header { padding: 18px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 800; color: var(--primary); background: white; }
.accordion-content { display: none; padding: 20px; border-top: 1px solid #f0f0f0; background: white; }
.accordion-item.active .accordion-content { display: block; animation: slideDown 0.3s ease; }
@keyframes slideDown { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }

.card { border: 1px solid #eee; border-radius: 12px; padding: 15px; text-align: center; background: white; transition: 0.3s; height: 100%; display: flex; flex-direction: column; justify-content: space-between; box-sizing: border-box; overflow: hidden; }
.card:hover { border-color: var(--salmon); box-shadow: 0 15px 30px rgba(0,0,0,0.1); transform: translateY(-5px); }
.card img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; border: 3px solid #f5f5f5; align-self: center; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: zoom-in; }
.card:hover img { transform: scale(1.15) rotate(3deg); }
.card h3 { font-size: 0.85rem; margin: 5px 0; min-height: 40px; display: flex; align-items: center; justify-content: center; line-height: 1.2; word-break: break-word; }
.price { font-weight: 800; color: var(--primary); display: block; margin-bottom: 5px; }
.qty-input { width: 40px; text-align: center; border: 1px solid #ddd; border-radius: 5px; padding: 5px; font-size: 16px; }
.btn-add { background: var(--primary); color: white; border: none; padding: 10px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top:5px; transition:0.2s; font-size: 0.85rem; }
@media (max-width: 900px) { .card { padding: 10px; } .card img { width: 70px; height: 70px; } .card h3 { font-size: 0.75rem; } .btn-add { padding: 8px 0; font-size: 0.75rem; } }

.card.prestige { background: #222; color: white; border: 1px solid var(--accent); } .card.prestige h3 { color: var(--accent); } .card.prestige .price { color: #fff; } .card.prestige .btn-add { background: var(--accent); color: black; }
.card.gold-edition { background: linear-gradient(135deg, #fffbf0, #fff); border: 2px solid #f1c40f; box-shadow: 0 0 15px rgba(241, 196, 15, 0.3); }
.card.gold-edition img { border-color: #f1c40f; } .card.gold-edition h3 { color: #b7950b; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; } .card.gold-edition .btn-add { background: #f1c40f; color: #fff; text-shadow: 0 1px 1px rgba(0,0,0,0.2); }

#lightbox { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); backdrop-filter: blur(5px); justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; }
#lightbox.visible { display: flex; opacity: 1; }
#lightbox img { max-width: 90%; max-height: 80%; border-radius: 10px; box-shadow: 0 0 20px rgba(255,255,255,0.2); transform: scale(0.8); transition: transform 0.3s; }
#lightbox.visible img { transform: scale(1); }
.close-lightbox { position: absolute; top: 20px; right: 20px; color: white; font-size: 2rem; cursor: pointer; background: rgba(0,0,0,0.5); width: 40px; height: 40px; border-radius: 50%; text-align: center; line-height: 40px; }

.pay-option { display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #ddd; padding: 10px 5px; text-align: center; border-radius: 8px; cursor: pointer; font-size: 0.8rem; transition: all 0.2s; background: #fafafa; color: #777; }
.pay-option:hover { background: #f0f0f0; }
.pay-option.active { border-color: var(--primary); background: #f0edff; color: var(--primary); font-weight: bold; box-shadow: 0 4px 10px rgba(72, 52, 212, 0.15); }

.cart-wrapper { 
background: white; padding: 25px; border-radius: var(--radius); position: static !important; top: auto !important; 
border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-bottom: none; box-shadow: 0 -5px 25px rgba(0,0,0,0.03); border: 1px solid #eee;
}
.cart-items { margin-bottom: 15px; max-height: 25vh; min-height: 50px; overflow-y: auto; padding-right: 5px; }
.cart-items::-webkit-scrollbar { width: 6px; } .cart-items::-webkit-scrollbar-track { background: #f1f1f1; } .cart-items::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }

.btn-checkout { background: linear-gradient(135deg, var(--primary), #6c5ce7); color: white; width: 100%; padding: 15px; font-weight: 900; border: none; border-radius: 10px; cursor: pointer; margin-top: 10px; font-size: 1rem; }
input.field { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }

#mobile-sticky-cart { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #eee; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); padding: 12px 20px; display: none; justify-content: space-between; align-items: center; z-index: 2000; box-sizing: border-box; }
@media (max-width: 900px) { #mobile-sticky-cart.visible { display: flex; } }
.m-cart-info { font-size: 0.9rem; color: #333; } .m-cart-total { font-weight: 900; color: var(--primary); font-size: 1.1rem; }
.m-cart-btn { background: var(--primary); color: white; padding: 10px 20px; border-radius: 30px; font-weight: 700; text-decoration: none; font-size: 0.9rem; box-shadow: 0 4px 10px rgba(72, 52, 212, 0.4); }

.extra-content-box { background: white; padding: 25px; border-radius: var(--radius); box-shadow: var(--shadow); border: 1px solid #eee; }
.gallery-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; }
.gallery-item img { width: 100%; border-radius: 8px; aspect-ratio: 1/1; object-fit: cover; cursor: zoom-in; transition: 0.3s; }
.gallery-item img:hover { transform: scale(1.05); }
.payment-options { display: flex; gap: 10px; margin: 15px 0; }
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }

.contact-box { background: #fdfdfd; padding: 20px; border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); border-top-left-radius: 0; border-top-right-radius: 0; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid #eee; border-top: 1px dashed #ddd; margin-top: 0; text-align: center; }
.contact-btn { flex: 1; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 0.85rem; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; color: white !important; }
.contact-btn:hover { transform: translateY(-2px); }
.contact-btn.fb { background: #1877F2; box-shadow: 0 4px 10px rgba(24, 119, 242, 0.3); }
.contact-btn.mail { background: #2d3436; box-shadow: 0 4px 10px rgba(45, 52, 54, 0.3); }

.sticky-group { position: sticky; top: calc(var(--top-gap) + var(--banner-1-height) + var(--banner-2-height) + var(--header-height) + 20px); height: fit-content; }
.cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f5f5f5; padding: 10px 0; font-size: 0.85rem; }

.custom-upload-btn { display: block; border: 2px dashed #ff7675; background-color: #fff5f5; color: #ff7675; padding: 25px 10px; border-radius: 12px; cursor: pointer; transition: 0.3s; font-weight: bold; font-size: 0.9rem; }
.custom-upload-btn:hover { background-color: #ffeaea; border-color: #d63031; color: #d63031; transform: scale(0.98); }
</style>
</head>
<body>

<div id="lightbox" onclick="closeLightbox()">
<div class="close-lightbox">&times;</div>
<img id="lightbox-img" src="" onclick="event.stopPropagation()">
</div>

<div id="toast"><i class="fa-solid fa-check-circle"></i> Dodano!</div>

<div id="mobile-sticky-cart">
<div class="m-cart-info">
<span>Razem:</span> <span class="m-cart-total" id="mobileTotal">0.00 PLN</span>
</div>
<a href="#koszyk" class="m-cart-btn" onclick="scrollToCartMobile()">
ZAMAWIAM <i class="fa-solid fa-arrow-right"></i>
</a>
</div>

<div class="event-banner">
<div>
üö® STOISKO: 17 & 18 GRUDNIA! FUW, HALL G≈Å√ìWNY
<span class="event-highlight">üé° Ko≈Ço Fortuny </span> 
<span class="event-highlight">üì¶ Odbi√≥r zam√≥wie≈Ñ </span> 
<br style="display:none;" class="mobile-break">
<span class="event-highlight">üì∏ Fotobudka ≈õwiƒÖteczna </span>
<span style="color:yellow; text-shadow:0 1px 2px black;">üéì 17.12, 14:00 - ZDJƒòCIE Z DZIEKANEM!</span>
</div>
</div>

<div class="promo-banner">
<div class="marquee">
üî• SALE SALE SALE! üî• 3+1: KUP 3 - CZWARTƒÑ DOSTANIESZ GRATIS (NA Tƒò SAMƒÑ CENƒò)! üî• DODATKOWO PRZY ZAKUPIE POWY≈ªEJ 15 SZTUK ≈ÅAPIESZ -10% NA WSZYSTKO! üî• ZAPRASZAMY NA STOISKO! üî• SALE SALE SALE! üî•
</div>
</div>

<header>
<div class="nav-inner">
<button class="mobile-menu-toggle" onclick="toggleMenu()">
MENU <i class="fa-solid fa-bars"></i>
</button>

<a href="#" class="logo" onclick="location.reload()">
<img src="pinmeup_logo.png" alt="Logo"> 
<span>PIN ME UP!</span>
</a>

<nav class="main-menu" id="navMenu">
<a href="#acc-custom" class="menu-link">Kreator</a>
<a href="#acc-logo" class="menu-link">Loga</a>
<a href="#acc-fuw" class="menu-link" style="color: #f37034;">FUW Vibe</a>
<a href="#acc-fame" class="menu-link gold">BADGE OF FAME üèÜ</a>
<a href="#acc-memy" class="menu-link">Memy</a>
<a href="#acc-xmas" class="menu-link highlight">XMAS üéÑ</a>
<a href="#acc-pride" class="menu-link">#PRIDE üè≥Ô∏è‚Äçüåà</a>
<a href="#acc-blind" class="menu-link">Blindbox</a>
<a href="#acc-border" class="menu-link">Borderkicia & friends</a>
<a href="#acc-prestige" class="menu-link">Presti≈º</a>
<a href="#acc-inne" class="menu-link">Inne</a>
</nav>

<a href="#koszyk" class="cart-btn-desktop">
<i class="fa-solid fa-cart-shopping"></i> <span id="cartCount">0</span>
</a>
</div>
</header>

<div class="main-wrapper">

<div class="content-col">

<div id="acc-custom" class="accordion-item active" style="border-left-color: var(--salmon);">
<div class="accordion-header" onclick="toggleAcc(this)">
<span>üé® KREATOR (W≈ÅASNY WZ√ìR)</span>
<i class="fa-solid fa-chevron-down"></i>
</div>
<div class="accordion-content">
  <div style="text-align:center;">
    <p style="font-size:0.9rem; margin-bottom: 15px;">
      Przyjaci√≥≈Çka? Gojo Satoru? Kotek? A mo≈ºe... Dziekan Turzy≈Ñski...? To nie problem! Wgraj swoje ulubione zdjƒôcie z galerii telefonu! ‚ù§Ô∏è
    </p>

    <div style="margin-bottom: 20px;">
      <label for="fakeInput" class="custom-upload-btn" onclick="document.getElementById('realFileInput').click()">
        <i class="fa-regular fa-images" style="font-size: 2rem; margin-bottom: 8px;"></i><br>
        <span>Kliknij, aby wybraƒá zdjƒôcie<br>z Galerii Telefonu üì∏</span>
      </label>
      <div id="previewContainer" style="display:none; margin-top:15px; padding:10px; border:1px solid #eee;">
          <img id="imgPreview" style="width:100px; height:100px; object-fit:cover;">
          <br><small>Wybrano zdjƒôcie!</small>
      </div>
    </div>

    <div style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
      <span class="price" style="font-size: 1.2rem; font-weight: bold; color: #2d3436;">7.00 PLN</span>
      <div style="display: flex; gap: 10px; align-items: center; justify-content: center;">
        <button class="btn-add" style="width:auto; padding:8px 30px; background-color: var(--salmon);" onclick="addCustomItem()">DODAJ DO KOSZYKA</button>
      </div>
    </div>
  </div>
</div>
</div>

<div id="acc-border" class="accordion-item" style="border-left-color: #9b59b6;">
<div class="accordion-header" onclick="toggleAcc(this)"><span>üê± BORDERKICIA</span><i class="fa-solid fa-chevron-down"></i></div>
<div class="accordion-content">
<div class="grid">
    <div class="card"><img src="wmed (45).png"><h3>zakazane s≈Çowa</h3><span class="price">5.00 PLN</span><button class="btn-add" onclick="addItem('Zakazane Slowa', 5)">DODAJ</button></div>
    <div class="card"><img src="wmed (36).png"><h3>im just a physicist</h3><span class="price">5.00 PLN</span><button class="btn-add" onclick="addItem('Physicist', 5)">DODAJ</button></div>
    <div class="card"><img src="wmed (38).png"><h3>Borderkicia</h3><span class="price">5.00 PLN</span><button class="btn-add" onclick="addItem('Borderkicia', 5)">DODAJ</button></div>
</div>
</div>
</div>

<div id="acc-memy" class="accordion-item" style="border-left-color: #88b148;">
<div class="accordion-header" onclick="toggleAcc(this)"><span>üê∏ MEMY</span><i class="fa-solid fa-chevron-down"></i></div>
<div class="accordion-content">
<div class="grid">
    <script>
        const memy = ["wmed (19).png", "wmed (21).png", "wmed (23).png", "wmed (24).png", "wmed (25).png", "wmed (26).png", "wmed (4).png"];
        memy.forEach((file, i) => {
            document.write(`<div class="card"><img src="${file}"><h3>Mem #${i+1}</h3><span class="price">5.00 PLN</span><button class="btn-add" onclick="addItem('Mem #${i+1}', 5)">DODAJ</button></div>`);
        });
    </script>
</div>
</div>
</div>

<div id="acc-xmas" class="accordion-item" style="border-left-color: #c0392b;">
<div class="accordion-header" onclick="toggleAcc(this)"><span>üéÑ XMAS</span><i class="fa-solid fa-chevron-down"></i></div>
<div class="accordion-content">
    <div class="grid">
        <div class="card"><img src="wmed (46).png"><h3>Merry Christmas</h3><span class="price">5.00 PLN</span><button class="btn-add" onclick="addItem('Merry Christmas', 5)">DODAJ</button></div>
    </div>
</div>
</div>

</div>

<div class="sidebar">
<div class="sticky-group">

<div id="koszyk" class="cart-wrapper">
<div class="cart-header">
    <h2 style="margin:0; color:var(--primary); font-size:1.3rem;">TW√ìJ RACHUNEK</h2>
    <small style="color:#888;">PIN ME UP STORE</small>
</div>

<div id="cartItems" class="cart-items">
    <div style="text-align:center; padding:30px; color:#aaa;">Pusto...</div>
</div>

<div id="promoBox"></div>

<div class="cart-total-section">
    <label class="tip-box" style="display:flex; align-items:center; gap:10px; cursor:pointer; margin-bottom:10px;">
        <input type="checkbox" id="tipCheck" onchange="renderCart()" style="transform:scale(1.2);">
        <span style="font-size:0.9rem;">Napiwek na monsterka (+1 PLN) ‚ù§Ô∏è</span>
    </label>
    <div style="display:flex; justify-content:space-between; align-items:flex-end;">
        <span style="font-weight:bold; color:#555;">SUMA:</span>
        <span style="font-size:1.6rem; font-weight:900; color:var(--primary);"><span id="totalPrice">0.00</span> PLN</span>
    </div>
</div>

<div style="margin-top:20px;">
    <h4 style="margin:0 0 10px 0; font-size:0.9rem; text-transform: uppercase; color: #555;">Twoje Dane:</h4>
    <input type="text" id="clientName" class="field" placeholder="Imiƒô i Nazwisko">
    <input type="email" id="clientEmail" class="field" placeholder="Tw√≥j E-mail">
    
    <h4 style="margin:10px 0 5px 0; font-size:0.9rem; text-transform: uppercase; color: #555;">P≈Çatno≈õƒá:</h4>
    <select id="paymentSelect" class="field" style="background:white;">
        <option value="BLIK">BLIK (+48 698 793 950)</option>
        <option value="GOTOWKA">Got√≥wka przy odbiorze</option>
        <option value="PRZELEW">Przelew</option>
    </select>

    <div style="margin-top:10px; padding:10px; border:1px dashed #ccc; border-radius:8px; background:#fafafa;">
        <label style="font-size:0.8rem; font-weight:bold;">üì∏ Tu jest Twoje zdjƒôcie:</label>
        <input type="file" id="realFileInput" accept="image/*" onchange="handleFileSelect(this)" style="font-size:0.8rem; width:100%;">
    </div>

    <button class="btn-checkout" onclick="submitWithAutoFile()">
        ZAMAWIAM I WYSY≈ÅAM üöÄ
    </button>
</div>
</div>

<div class="contact-box">
    <p style="font-size:0.8rem;">Problemy? Pisz na FB!</p>
</div>

</div> </div>

</div>

<footer style="text-align:center; padding:30px; color:#888; font-size:0.8rem; margin-top:20px;">
&copy; 2025 PIN ME UP!
</footer>

<script>
let cart = [];

// --- UI HELPERS ---
function openLightbox(src) { document.getElementById('lightbox-img').src = src; document.getElementById('lightbox').classList.add('visible'); }
function closeLightbox() { document.getElementById('lightbox').classList.remove('visible'); }
function toggleMenu() { document.getElementById('navMenu').classList.toggle('open'); }
function toggleAcc(header) { header.parentElement.classList.toggle('active'); }
function showToast(msg) { 
    const t = document.getElementById('toast'); t.innerHTML = msg; t.className = "show"; setTimeout(() => t.className = "", 3000); 
}

// --- LOGIKA KOSZYKA ---
function addItem(name, price) {
    cart.push({ name: name, price: price });
    renderCart();
    showToast("Dodano: " + name);
}

function addCustomItem() {
    // Sprawdzamy czy plik jest wybrany
    const fileInput = document.getElementById('realFileInput');
    if(fileInput.files.length === 0) {
        alert("Wybierz najpierw zdjƒôcie (kliknij w ikonƒô aparatu w sekcji Kreator lub na dole w koszyku)!");
        return;
    }
    cart.push({ name: "W≈Çasny Wz√≥r (Plik za≈ÇƒÖczony)", price: 7.00 });
    renderCart();
    showToast("Dodano Tw√≥j projekt!");
}

function handleFileSelect(input) {
    // PodglƒÖd obrazka
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const preview = document.getElementById('imgPreview');
            if(preview) preview.src = e.target.result;
            document.getElementById('previewContainer').style.display = 'block';
        }
        reader.readAsDataURL(input.files[0]);
    }
}

function removeItem(index) {
    cart.splice(index, 1);
    renderCart();
}

function renderCart() {
    const container = document.getElementById('cartItems');
    const totalEl = document.getElementById('totalPrice');
    
    if(cart.length === 0 && !document.getElementById('tipCheck').checked) {
        container.innerHTML = "Pusto..."; totalEl.innerText = "0.00"; return;
    }

    let html = "";
    let total = 0;
    
    // Zliczanie
    let summary = {};
    cart.forEach(item => {
        if(!summary[item.name]) summary[item.name] = {qty:0, price:item.price};
        summary[item.name].qty++;
    });

    for(let name in summary) {
        let item = summary[name];
        let lineTotal = item.qty * item.price;
        total += lineTotal;
        html += `<div class="cart-item">
            <div>${name} x${item.qty}</div>
            <div>${lineTotal} z≈Ç <span onclick="removeByName('${name}')" style="color:red; cursor:pointer;">&times;</span></div>
        </div>`;
    }

    // 3+1
    if(cart.length >= 4) {
        let discount = Math.floor(cart.length/4) * 5;
        total -= discount;
        html += `<div style="color:green; font-size:0.8rem;">Rabat 3+1: -${discount} z≈Ç</div>`;
    }

    if(document.getElementById('tipCheck').checked) {
        total += 1;
        html += `<div class="cart-item"><div>Napiwek</div><div>1.00 z≈Ç</div></div>`;
    }

    container.innerHTML = html;
    totalEl.innerText = total.toFixed(2);
}

function removeByName(name) {
    const idx = cart.findIndex(i => i.name === name);
    if(idx > -1) removeItem(idx);
}

// --- WYSY≈ÅKA Z AUTO-PLIKIEM (JS FETCH) ---
function submitWithAutoFile() {
    if(cart.length === 0 && !document.getElementById('tipCheck').checked) { alert("Koszyk pusty!"); return; }
    
    const name = document.getElementById('clientName').value.trim();
    const email = document.getElementById('clientEmail').value.trim();
    const payment = document.getElementById('paymentSelect').value;
    const total = document.getElementById('totalPrice').innerText;

    if(!name || name.length < 2) { alert("Podaj imiƒô!"); return; }
    if(!email.includes('@')) { alert("Podaj email!"); return; }

    const btn = document.querySelector('.btn-checkout');
    const oldText = btn.innerHTML;
    btn.innerHTML = "WYSY≈ÅANIE..."; btn.disabled = true;

    // 1. BUDUJEMY TEKST ZAM√ìWIENIA
    let orderText = `ZAM√ìWIENIE OD: ${name} (${email})\n`;
    orderText += `P≈ÅATNO≈öƒÜ: ${payment}\n---------------------\n`;
    
    let summary = {};
    cart.forEach(item => { if(!summary[item.name]) summary[item.name]=0; summary[item.name]++; });
    for(let n in summary) { orderText += `${n}: ${summary[n]} szt.\n`; }
    
    if(document.getElementById('tipCheck').checked) orderText += `NAPIWEK: TAK ‚ù§Ô∏è\n`;
    orderText += `---------------------\nRAZEM: ${total} PLN\n`;

    // 2. TWORZYMY FORM DATA
    const fd = new FormData();
    fd.append("email", email); // ≈ªeby FormSubmit wiedzia≈Ç komu odpisaƒá
    fd.append("_subject", "NOWE ZAM√ìWIENIE: " + name);
    fd.append("_captcha", "true"); // WYMUSZENIE CAPTCHY
    fd.append("_template", "table");
    fd.append("_cc", email); // Kopia do klienta
    
    // Tre≈õƒá do maila (jako pola tekstowe)
    fd.append("KLIENT", name);
    fd.append("EMAIL", email);
    fd.append("ZAM√ìWIENIE", orderText);

    // 3. DO≈ÅƒÑCZAMY PRAWDZIWY PLIK JE≈öLI JEST
    const fileInput = document.getElementById('realFileInput');
    if(fileInput.files.length > 0) {
        fd.append("ZDJECIE_WLASNE", fileInput.files[0]);
    }

    // 4. DO≈ÅƒÑCZAMY "SZTUCZNY" PLIK RACHUNKU (To wymusi traktowanie jako 'plik')
    const blob = new Blob([orderText], { type: "text/plain" });
    const receiptFile = new File([blob], "Rachunek_Zamowienia.txt", { type: "text/plain" });
    fd.append("RACHUNEK_PLIK", receiptFile);

    // 5. WYSY≈ÅKA FETCH
    fetch("https://formsubmit.co/pinmeup.fuw@gmail.com", {
        method: "POST",
        body: fd
    })
    .then(response => {
        if(response.ok) {
            // Przekierowanie do Captchy je≈õli FormSubmit tego wymaga, albo sukces
            if(response.redirected) {
                window.location.href = response.url; // Przekieruj na Captchƒô
            } else {
                // Czasem FormSubmit zwraca JSON, czasem HTML
                alert("WYS≈ÅANO! Sprawd≈∫ maila (r√≥wnie≈º SPAM).");
                cart = []; renderCart();
                btn.innerHTML = oldText; btn.disabled = false;
            }
        } else {
            alert("B≈ÇƒÖd wysy≈Çania! Spr√≥buj jeszcze raz.");
            btn.innerHTML = oldText; btn.disabled = false;
        }
    })
    .catch(err => {
        // Je≈õli fetch zawiedzie (np. zablokowany), spr√≥bujmy formularza tradycyjnego
        console.error(err);
        alert("Wys≈Çano ≈ºƒÖdanie! Je≈õli nie widzisz Captchy, sprawd≈∫ maila.");
        btn.innerHTML = oldText; btn.disabled = false;
    });
}
</script>

</body>
</html>
