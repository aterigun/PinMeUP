<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIN ME UP! - Sklep Studencki</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4834d4; 
            --primary-dark: #301b9e;
            --salmon: #ff7979; 
            --accent: #f9ca24; 
            --bg-color: #f7f1ff;
            --glass: rgba(255, 255, 255, 0.95);
            --shadow: 0 10px 40px -10px rgba(72, 52, 212, 0.15);
            --radius: 16px;
            --banner-height: 40px;
            --header-height: 70px; /* Zwiƒôkszone dla menu */
        }

        html { scroll-behavior: smooth; }

        body { 
            font-family: 'Montserrat', sans-serif; 
            background-color: var(--bg-color); 
            background-image: radial-gradient(#e0d4fc 1px, transparent 1px);
            background-size: 20px 20px;
            color: #2d3436; 
            margin: 0; 
            padding-top: calc(var(--banner-height) + var(--header-height) + 50px); /* Odstƒôp od g√≥ry */
        }

        /* --- 1. EVENT BANNER (G√ìRA) --- */
        .event-banner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--banner-height);
            background: linear-gradient(90deg, #ff0055, #ff7979, #f9ca24);
            background-size: 200% 200%;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.85rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 1002;
            animation: gradientMove 5s ease infinite;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .event-highlight {
            background: rgba(0,0,0,0.2);
            padding: 2px 8px;
            border-radius: 4px;
            margin: 0 5px;
        }

        /* --- 2. HEADER (POD BANNEREM) --- */
        header { 
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            position: fixed; 
            top: var(--banner-height); 
            left: 0;
            width: 100%; 
            height: var(--header-height);
            z-index: 1001; 
            border-bottom: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            display: flex;
            align-items: center;
        }

        .nav-inner { 
            max-width: 1200px; 
            width: 100%;
            margin: 0 auto; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 0 20px; 
        }

        .logo { 
            font-weight: 900; 
            font-size: 1.4rem; 
            color: var(--primary); 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            cursor: pointer; 
            text-decoration: none;
        }
        .logo img { height: 40px; border-radius: 50%; border: 2px solid var(--primary); }

        /* NOWE MENU KATEGORII */
        .main-menu {
            display: flex;
            gap: 15px;
        }
        .menu-link {
            text-decoration: none;
            color: #555;
            font-weight: 700;
            font-size: 0.85rem;
            padding: 8px 12px;
            border-radius: 20px;
            transition: 0.3s;
            text-transform: uppercase;
        }
        .menu-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        .menu-link.highlight {
            color: var(--salmon);
            border: 1px solid var(--salmon);
        }

        .cart-btn { 
            background: var(--primary); 
            color: white; 
            padding: 8px 20px; 
            border-radius: 50px; 
            font-weight: 700; 
            text-decoration: none; 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            transition: 0.3s; 
            font-size: 0.9rem;
        }
        .cart-btn:hover { background: var(--primary-dark); transform: scale(1.05); }

        /* UKRYWANIE MENU NA MA≈ÅYCH EKRANACH */
        @media (max-width: 900px) {
            .main-menu { display: none; } /* Uproszczenie dla mobile */
            .logo span { display: none; } /* Tylko ikonka loga na mobile */
        }

        /* --- UK≈ÅAD STRONY --- */
        .main-wrapper { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 20px; 
            display: grid; 
            grid-template-columns: 2fr 1.1fr; 
            gap: 40px; 
            align-items: start; 
            min-height: 80vh;
        }
        @media (max-width: 900px) { .main-wrapper { grid-template-columns: 1fr; } }

        /* --- AKORDEONY --- */
        .accordion-item { 
            background: white; 
            border-radius: var(--radius); 
            margin-bottom: 20px; 
            box-shadow: var(--shadow); 
            overflow: hidden;
            scroll-margin-top: 130px; /* ≈ªeby header nie zas≈Çania≈Ç po klikniƒôciu w menu */
        }
        .accordion-header { 
            padding: 20px; 
            cursor: pointer; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-weight: 800; 
            color: var(--primary); 
            background: white; 
            transition: 0.3s; 
        }
        .accordion-header:hover { background: #fafafa; color: var(--salmon); }
        .accordion-content { display: none; padding: 25px; border-top: 1px solid #f0f0f0; }
        .accordion-item.active .accordion-content { display: block; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }

        /* --- KARTY --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .card { 
            border: 1px solid #eee; border-radius: 12px; padding: 15px; 
            text-align: center; background: white; transition: 0.3s; 
        }
        .card:hover { transform: translateY(-5px); border-color: var(--salmon); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .card img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; border: 3px solid #f5f5f5; }
        .card h3 { font-size: 0.9rem; margin: 5px 0; height: 35px; display: flex; align-items: center; justify-content: center; }
        
        .price { font-weight: 800; color: var(--primary); display: block; margin-bottom: 5px; }
        .qty-input { width: 40px; text-align: center; border: 1px solid #ddd; border-radius: 5px; padding: 5px; }
        .btn-add { background: var(--primary); color: white; border: none; padding: 8px; width: 100%; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top:5px; transition:0.2s; }
        .btn-add:hover { background: var(--salmon); }

        /* PRESTI≈ª STYLE */
        .card.prestige { background: #222; color: white; border: 1px solid var(--accent); }
        .card.prestige h3 { color: var(--accent); }
        .card.prestige .price { color: #fff; }
        .card.prestige .btn-add { background: var(--accent); color: black; }

        /* --- SIDEBAR / KOSZYK --- */
        .cart-wrapper { 
            background: white; padding: 25px; border-radius: var(--radius); 
            border-top: 5px solid var(--salmon); position: sticky; top: 130px; 
            box-shadow: var(--shadow); 
        }
        .cart-items { margin-bottom: 20px; max-height: 250px; overflow-y: auto; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px dashed #eee; padding: 10px 0; font-size: 0.85rem; }
        
        .tip-box { background: #fffdf0; padding: 10px; border-radius: 8px; margin: 10px 0; border: 1px dashed var(--accent); display: flex; align-items: center; gap: 10px; cursor: pointer; }
        
        /* P≈Çatno≈õci */
        .payment-options { display: flex; gap: 10px; margin: 15px 0; }
        .pay-option { flex: 1; border: 1px solid #ddd; padding: 10px; text-align: center; border-radius: 8px; cursor: pointer; font-size: 0.85rem; }
        .pay-option.active { border-color: var(--primary); background: #eee; color: var(--primary); font-weight: bold; }
        .btn-checkout { background: var(--primary); color: white; width: 100%; padding: 15px; font-weight: 900; border: none; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .btn-checkout:hover { background: var(--salmon); transform: translateY(-2px); }

        /* --- GALERIA NA DOLE --- */
        .gallery-section {
            max-width: 1200px; margin: 60px auto 20px; padding: 0 20px;
            text-align: center;
        }
        .gallery-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;
        }
        .gallery-item {
            border-radius: 12px; overflow: hidden; height: 200px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); position: relative;
        }
        .gallery-item img {
            width: 100%; height: 100%; object-fit: cover; transition: 0.5s;
        }
        .gallery-item:hover img { transform: scale(1.1); }

        /* --- OPINIE --- */
        .review-form {
            background: #fff; padding: 20px; border-radius: 12px; margin-top: 20px; border: 1px solid #eee;
        }
        .review-box { margin-bottom: 15px; border-left: 3px solid #ddd; padding-left: 10px; }

        input.field, textarea.field { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }

    </style>
</head>
<body>

<div id="social-proof" style="position:fixed; bottom:20px; left:20px; background:white; padding:15px; border-radius:10px; border-left:5px solid var(--salmon); box-shadow:0 10px 30px rgba(0,0,0,0.15); transform:translateX(-200%); transition:0.5s; z-index:9999; display:flex; gap:10px; align-items:center;">
    <img src="https://via.placeholder.com/50" id="sp-img" style="width:40px; height:40px; border-radius:50%;" alt="User">
    <div style="font-size:0.8rem;">
        <strong id="sp-name" style="color:var(--primary); display:block;">Student/ka</strong>
        <span id="sp-msg">Kupi≈Ç DubajskƒÖ!</span>
    </div>
</div>

<div class="event-banner">
    üö® STOISKO: 15 & 18 GRUDNIA! 
    <span class="event-highlight">üé° Ko≈Ço Fortuny</span> 
    <span class="event-highlight">üì¶ Odbi√≥r</span> 
    <span class="event-highlight">üì∏ Fotobudka</span>
    <span style="color:yellow; margin-left:10px;">üéì 18.12 - ZDJƒòCIE Z DZIEKANEM!</span>
</div>

<header>
    <div class="nav-inner">
        <a href="#" class="logo" onclick="location.reload()">
            <img src="pinmeup_logo.jpg" alt="Logo"> 
            <span>PIN ME UP!</span>
        </a>

        <nav class="main-menu">
            <a href="#acc-custom" class="menu-link">W≈Çasny</a>
            <a href="#acc-prestige" class="menu-link">Presti≈º</a>
            <a href="#acc-blind" class="menu-link">Blindbox</a>
            <a href="#acc-bestsellers" class="menu-link">Memy/Logo</a>
            <a href="#acc-xmas" class="menu-link highlight">XMAS üéÑ</a>
            <a href="#acc-pride" class="menu-link">#PRIDE üè≥Ô∏è‚Äçüåà</a>
            <a href="#acc-border" class="menu-link">Borderkicia</a>
            <a href="#galeria" class="menu-link">Galeria</a>
        </nav>

        <a href="#koszyk" class="cart-btn">
            <i class="fa-solid fa-cart-shopping"></i> <span id="cartCount">0</span>
        </a>
    </div>
</header>

<div class="main-wrapper">

    <div class="content-col">
        
        <div id="acc-custom" class="accordion-item active" style="border-left: 6px solid var(--salmon);">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üé® KREATOR (WGRAJ FOTKƒò) - 7 PLN</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <div style="text-align:center;">
                    <p>Wgraj zdjƒôcie, my je dotniemy.</p>
                    <div style="border: 2px dashed #ddd; padding: 20px; border-radius: 10px; margin-bottom: 10px;">
                        <input type="file" id="customFile" accept="image/*">
                    </div>
                    Ilo≈õƒá: <input type="number" id="customQty" class="qty-input" value="1" min="1">
                    <button class="btn-add" style="width:auto; padding:5px 20px;" onclick="addCustomFile()">DODAJ</button>
                </div>
            </div>
        </div>

        <div id="acc-prestige" class="accordion-item" style="border-left: 6px solid #222;">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üíé STREFA PRESTI≈ªU</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content" style="background:#1a1a1a;">
                <div class="grid">
                    <div class="card prestige">
                        <img src="czekolada.png" alt="Dubaj">
                        <h3>Dubajska Czekolada</h3>
                        <span class="price">15.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_dubaj" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Dubajska Czekolada', 15, 'qty_dubaj')">BIORƒò</button>
                    </div>
                    <div class="card prestige">
                        <img src="labubu.png" alt="Labubu">
                        <h3>Labubu Rare</h3>
                        <span class="price">20.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_labubu" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Labubu Rare', 20, 'qty_labubu')">BIORƒò</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="acc-blind" class="accordion-item" style="border-left: 6px solid #8e44ad;">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üîÆ BLINDBOX (NIESPODZIANKA)</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <p>P≈Çacisz 3 z≈Ç, dostajesz losowy wz√≥r.</p>
                <input type="number" id="qty_blind" class="qty-input" value="1">
                <button class="btn-add" style="background:#8e44ad; width:auto;" onclick="addItem('üîÆ Blindbox', 3, 'qty_blind')">RYZYKUJƒò</button>
            </div>
        </div>

        <div id="acc-bestsellers" class="accordion-item active">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üî• BESTSELLERY (LOGA, MEMY)</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <div class="grid">
                    <div class="card">
                        <img src="logo_uczelni.png" alt="Logo">
                        <h3>Logo Wydzia≈Çu</h3>
                        <span class="price">5.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_logo" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Logo Wydzia≈Çu', 5, 'qty_logo')">DODAJ</button>
                    </div>
                    <div class="card">
                        <img src="mem_kot.png" alt="Kot">
                        <h3>Kot Student</h3>
                        <span class="price">5.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_kot" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Kot Student', 5, 'qty_kot')">DODAJ</button>
                    </div>
                    <div class="card">
                        <img src="gwiazda1.png" alt="Starosta">
                        <h3>Pan Starosta</h3>
                        <span class="price">6.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_starosta" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Pin: Starosta', 6, 'qty_starosta')">DODAJ</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="acc-xmas" class="accordion-item" style="border-left: 6px solid #c0392b;">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üéÑ KOLEKCJA XMAS</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <div class="grid">
                    <div class="card">
                        <img src="xmas_tree.png" alt="Choinka">
                        <h3>Choinka Pin</h3>
                        <span class="price">6.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_xmas1" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Pin Choinka', 6, 'qty_xmas1')">DODAJ</button>
                    </div>
                    <div class="card">
                        <img src="xmas_santa.png" alt="Miko≈Çaj">
                        <h3>Santa Vibe</h3>
                        <span class="price">6.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_xmas2" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Pin Miko≈Çaj', 6, 'qty_xmas2')">DODAJ</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="acc-pride" class="accordion-item" style="border-left: 6px solid #e1b12c;">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üè≥Ô∏è‚Äçüåà #PRIDE COLLECTION</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <div class="grid">
                    <div class="card">
                        <img src="pride_flag.png" alt="Flaga">
                        <h3>Flaga Rainbow</h3>
                        <span class="price">5.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_pride1" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Pin Pride Flag', 5, 'qty_pride1')">DODAJ</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="acc-border" class="accordion-item" style="border-left: 6px solid #74b9ff;">
            <div class="accordion-header" onclick="toggleAcc(this)">
                <span>üê∂ BORDERKICIA & FRIENDS</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="accordion-content">
                <div class="grid">
                    <div class="card">
                        <img src="border_dog.png" alt="Pies">
                        <h3>Border Collie</h3>
                        <span class="price">6.00 PLN</span>
                        <div class="qty-box"><input type="number" id="qty_border" class="qty-input" value="1"></div>
                        <button class="btn-add" onclick="addItem('Pin Borderkicia', 6, 'qty_border')">DODAJ</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="sidebar">
        
        <div id="koszyk" class="cart-wrapper">
            <h2 style="margin-top:0; color:var(--primary); font-size:1.3rem;">TWOJE ZAM√ìWIENIE</h2>
            
            <div id="cartItems" class="cart-items">
                <div style="text-align:center; padding:20px; color:#aaa;">Pusto :(</div>
            </div>

            <div id="promoBox"></div>

            <label class="tip-box">
                <input type="checkbox" id="tipCheck" onchange="renderCart()">
                <span>Napiwek (+1 PLN) ‚ù§Ô∏è</span>
            </label>

            <div class="saved-amount" id="savedDisplay" style="color:#27ae60; text-align:right; font-weight:bold; font-size:0.9rem;"></div>
            <div style="text-align:right; font-size:1.4rem; font-weight:900; color:var(--primary); margin-top:10px;">
                <span id="totalPrice">0.00</span> PLN
            </div>

            <hr style="margin:20px 0; border:0; border-top:1px solid #eee;">

            <h4>P≈Çatno≈õƒá:</h4>
            <div class="payment-options">
                <div class="pay-option active" id="pay_blik" onclick="setPayment('BLIK')">BLIK</div>
                <div class="pay-option" id="pay_cash" onclick="setPayment('GOT√ìWKA')">GOT√ìWKA</div>
            </div>
            <input type="hidden" id="paymentMethod" value="BLIK">

            <div class="blik-warn" id="blikInfo" style="display:block; background:#ffebeb; color:red; padding:10px; border-radius:5px; font-size:0.8rem; margin-bottom:10px;">
                ‚ö†Ô∏è Przelew BLIK na <strong>123-456-789</strong>
            </div>

            <input type="text" id="clientName" class="field" placeholder="Imiƒô i Nazwisko">
            <input type="email" id="clientEmail" class="field" placeholder="E-mail">
            
            <button class="btn-checkout" onclick="submitOrder()">ZAMAWIAM</button>
        </div>

        <div style="background:white; padding:20px; border-radius:12px; margin-top:20px; box-shadow:var(--shadow);">
            <h4 style="margin-top:0; color:var(--primary);">üí¨ CO M√ìWIƒÑ?</h4>
            
            <div class="review-box">
                <small>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</small>
                <p style="font-size:0.85rem; font-style:italic; margin:5px 0;">"Kupi≈Çem DubajskƒÖ, ≈ºeby zdaƒá egzamin. Zda≈Çem."</p>
                <strong>~ Marek</strong>
            </div>
            <div class="review-box">
                <small>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</small>
                <p style="font-size:0.85rem; font-style:italic; margin:5px 0;">"Super jako≈õƒá!"</p>
                <strong>~ Kasia</strong>
            </div>

            <hr>
            <p style="font-size:0.8rem; text-align:center;">Chcesz co≈õ dodaƒá?</p>
            <input type="text" id="reviewText" class="field" placeholder="Twoja opinia..." style="font-size:0.8rem;">
            <button class="btn-add" style="background:#555;" onclick="sendReview()">WY≈öLIJ OPINIƒò</button>
        </div>

    </div>
</div>

<section id="galeria" class="gallery-section">
    <h2 style="color:var(--primary); text-transform:uppercase; letter-spacing:2px;">üì∏ Galeria: Z ≈ºycia wziƒôte</h2>
    <div class="gallery-grid">
        <div class="gallery-item"><img src="https://via.placeholder.com/300x300?text=FOTO+1"></div>
        <div class="gallery-item"><img src="https://via.placeholder.com/300x300?text=FOTO+2"></div>
        <div class="gallery-item"><img src="https://via.placeholder.com/300x300?text=FOTO+3"></div>
        <div class="gallery-item"><img src="https://via.placeholder.com/300x300?text=FOTO+4"></div>
        <div class="gallery-item"><img src="https://via.placeholder.com/300x300?text=FOTO+5"></div>
    </div>
</section>

<footer style="text-align:center; padding:30px; color:#888; font-size:0.8rem;">
    &copy; 2024 PIN ME UP! <br> Sklep studencki created with ‚ù§Ô∏è
</footer>

<script>
    const MY_EMAIL = "pinmeup.fuw@gmail.com"; 

    // --- LOGIKA SKLEPU (Ta sama co wcze≈õniej) ---
    let cart = [];

    function toggleAcc(header) {
        // Zamyka inne, otwiera wybrane
        const item = header.parentElement;
        item.classList.toggle('active');
    }

    function addItem(name, price, inputId) {
        const qty = parseInt(document.getElementById(inputId).value);
        if(qty < 1) return;
        const existing = cart.find(item => item.name === name && !item.file);
        if(existing) { existing.qty += qty; } else { cart.push({ name: name, price: price, qty: qty, file: null }); }
        document.getElementById(inputId).value = 1;
        renderCart();
        
        // Animacja koszyka
        const icon = document.querySelector('.cart-btn i');
        icon.style.transform = "scale(1.5)";
        setTimeout(()=>icon.style.transform = "scale(1)", 300);
    }

    function addCustomFile() {
        const fileInput = document.getElementById('customFile');
        const qty = parseInt(document.getElementById('customQty').value);
        if(fileInput.files.length === 0) { alert("Wybierz plik!"); return; }
        cart.push({ name: "W≈Çasny Projekt", price: 7.00, qty: qty, file: fileInput.files[0] });
        fileInput.value = ""; document.getElementById('customQty').value = 1;
        renderCart(); alert("Dodano projekt!");
    }

    function removeItem(index) { cart.splice(index, 1); renderCart(); }

    function renderCart() {
        const container = document.getElementById('cartItems');
        const totalEl = document.getElementById('totalPrice');
        const promoBox = document.getElementById('promoBox');
        const savedEl = document.getElementById('savedDisplay');
        const isTip = document.getElementById('tipCheck').checked;

        container.innerHTML = "";
        let total = 0;
        let savings = 0;
        let promoText = "";

        if(cart.length === 0 && !isTip) {
            container.innerHTML = '<div style="text-align:center; padding:20px; color:#aaa;">Pusto :(</div>';
            totalEl.innerText = "0.00"; promoBox.innerHTML=""; savedEl.innerText=""; document.getElementById('cartCount').innerText="0"; return;
        }

        cart.forEach((item, index) => {
            let itemTotal = item.price * item.qty;
            if(item.name.includes("Dubajska")) savings += (150 - 15) * item.qty;
            if(item.name.includes("Labubu")) savings += (500 - 20) * item.qty;
            if(!item.file && item.qty >= 6) {
                const discount = Math.floor(item.qty / 6) * item.price;
                itemTotal -= discount; savings += discount; promoText = "Promocja 5+1 aktywna!";
            }
            total += itemTotal;
            container.innerHTML += `<div class="cart-item">
                <div>${item.name}<br><small>${item.qty}x${item.price}z≈Ç</small></div>
                <div>${itemTotal.toFixed(2)} z≈Ç <i class="fa-solid fa-trash" style="color:red; cursor:pointer; margin-left:5px;" onclick="removeItem(${index})"></i></div>
            </div>`;
        });

        if(isTip) { total += 1.00; container.innerHTML += `<div class="cart-item" style="color:var(--salmon)"><div>‚ù§Ô∏è Napiwek</div><div>1.00 z≈Ç</div></div>`; }

        totalEl.innerText = total.toFixed(2);
        document.getElementById('cartCount').innerText = cart.reduce((acc, i) => acc + i.qty, 0);
        promoBox.innerHTML = promoText ? `<div style="background:#e0ffe0; color:green; padding:5px; font-size:0.8rem; border-radius:5px;">${promoText}</div>` : "";
        savedEl.innerText = savings > 0 ? `OSZCZƒòDZASZ: ${savings.toFixed(2)} z≈Ç` : "";
    }

    function setPayment(type) {
        document.querySelectorAll('.pay-option').forEach(el => el.classList.remove('active'));
        if(type === 'BLIK') { document.getElementById('pay_blik').classList.add('active'); document.getElementById('blikInfo').style.display='block'; }
        else { document.getElementById('pay_cash').classList.add('active'); document.getElementById('blikInfo').style.display='none'; }
        document.getElementById('paymentMethod').value = type;
    }

    function submitOrder() {
        if(cart.length === 0 && !document.getElementById('tipCheck').checked) return alert("Koszyk pusty!");
        const name = document.getElementById('clientName').value;
        const email = document.getElementById('clientEmail').value;
        if(!name || !email) return alert("Podaj imiƒô i email!");

        const btn = document.querySelector('.btn-checkout');
        btn.innerText = "WYSY≈ÅANIE..."; btn.disabled = true;

        const fd = new FormData();
        fd.append("_captcha", "false"); fd.append("_subject", "ZAM√ìWIENIE: " + name);
        fd.append("Klient", name); fd.append("Email", email); fd.append("Metoda", document.getElementById('paymentMethod').value);
        fd.append("DoZap≈Çaty", document.getElementById('totalPrice').innerText);

        let summary = "";
        cart.forEach((item, i) => {
            summary += `${item.name} (${item.qty} szt)\n`;
            if(item.file) fd.append(`Plik_${i}`, item.file);
        });
        fd.append("ZAM√ìWIENIE", summary);

        fetch(`https://formsubmit.co/${MY_EMAIL}`, { method: "POST", body: fd })
        .then(() => { alert("Wys≈Çano!"); cart=[]; renderCart(); btn.innerText="ZAMAWIAM"; btn.disabled=false; })
        .catch(() => { alert("Wys≈Çano (sprawd≈∫ spam)."); btn.innerText="ZAMAWIAM"; btn.disabled=false; });
    }

    // --- FUNKCJA WYSY≈ÅANIA OPINII ---
    function sendReview() {
        const text = document.getElementById('reviewText').value;
        if(!text) return alert("Wpisz opiniƒô!");
        
        // Wysy≈Çamy opiniƒô jako zwyk≈Çy formularz do Ciebie
        const fd = new FormData();
        fd.append("_captcha", "false");
        fd.append("_subject", "NOWA OPINIA O SKLEPIE");
        fd.append("Tre≈õƒá", text);
        
        fetch(`https://formsubmit.co/${MY_EMAIL}`, { method: "POST", body: fd })
        .then(() => { alert("Dziƒôki za opiniƒô! Przejrzymy jƒÖ i dodamy na stronƒô."); document.getElementById('reviewText').value = ""; })
        .catch(() => alert("B≈ÇƒÖd wysy≈Çania opinii."));
    }

    // Social Proof
    setInterval(() => {
        const box = document.getElementById('social-proof');
        box.classList.add('visible');
        box.style.transform = "translateX(0)";
        setTimeout(() => box.style.transform = "translateX(-200%)", 5000);
    }, 15000);

</script>

</body>
</html>
